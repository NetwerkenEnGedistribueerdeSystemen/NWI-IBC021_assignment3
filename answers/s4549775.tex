\documentclass[12pt, a4paper]{article}

\usepackage{enumerate}

\setlength\parskip{1em}
\setlength\parindent{0em}

\title{Assignment 3}

\author{Hendrik Werner s4549775}

\begin{document}
\maketitle

\section{} %1
\begin{enumerate}[a]
	\item %a
	\begin{tabular}{|c|c|c|}
		\hline
		Datagram & Source & Destination\\\hline
		1 & 10.0.1.13:3366 & 128.119.164.189:80\\
		2 & 135.122.204.209:10 & 128.119.164.189:80\\
		3 & 128.119.164.189:80 & 135.122.204.209:10\\
		4 & 128.119.164.189:80 & 10.0.1.13:3366\\
		\hline
	\end{tabular}

	\begin{tabular}{|c|c|c|c|}
		\hline
		\multicolumn{2}{|c|}{WAN Side} & \multicolumn{2}{|c|}{LAN Side}\\\hline
		IP & Port & IP & Port\\\hline
		135.122.204.209 & 10 & 10.0.1.13 & 3366\\
		\hline
	\end{tabular}

	\item %b
	The NAT router receives a packet with some destination IP and port. It then looks up this address in its NAT table to get the LAN side IP and port this address corresponds to. The packet's destination address is replaced by the NAT with the new LAN side destination address, the new checksum is calculated and set, and the packet is sent to the LAN.

	\item %c
	The destination and source fields are part of the checksum so the checksum needs to be recalculated if any of these change as mentioned in (b).

\end{enumerate}

\section{} %2
\begin{enumerate}[a]
	\item %a
	Every router needs to be able to communicate with every other router for the subnets to be connected. Every router has 4 interfaces and we have 3 routers so this makes 12 interfaces in total.

	If we assume that the routers can use routing protocols it is sufficient if there exists a path between two routers for them to be able to communicate and no direct connection is required. We use 2 interfaces to connect two routers (one interface for each of them). Concordantly we need $2 * 2 = 4$ of our 12 interfaces to connect the routers to each other.

	This leaves us with 8 interfaces that can be connected to subnets so 8 subnets can be connected, one to each interface.

	\item %b
	We can only have a resolution of powers of two. $90 < 2^7, 60 < 2^6, 12 < 2^6$ so we can serve all interfaces with 7 and 6 bits of freedom respectively thus giving us these possible addresses:

	\begin{tabular}{|c|c|c|}
		\hline
		Subnet & IP & Nr of addresses\\\hline
		1 & 223.1.17.0/26 & 64\\
		2 & 223.1.17.128/25 & 128\\
		3 & 223.1.17.64/26 & 64\\
		\hline
	\end{tabular}

\end{enumerate}

\section{} %3
\begin{enumerate}[1]
	\item %1
	\item %2
	\item %3
	\item %4
	\item %5
	\item %6
	\item %7
\end{enumerate}

\end{document}
